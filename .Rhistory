} else {
return(textGrob(""))
}
}
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(1:7)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + scale_fill_manual("",values=c("slategray"="slategray","gray"="gray75","black"="black"))
#p <- p + facet_grid(. ~ type)
p <- p + theme_minimal() +
theme(
axis.text.x=element_text(size=6, hjust = 0,colour="slategray"),
axis.text.y=element_text(size = 5.5, angle = 0, hjust = 1,colour="slategray"),
strip.text.x = element_text(size = 8, angle = 0),
strip.text.y = element_text(size = 8, angle = 0),
axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
plot.title = element_text(size=7, face="bold",colour = "slategray"),
legend.position="none",
plot.title = element_text(size=7, face="bold",colour = "slategray"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "white")
)
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + scale_fill_manual("",values=c("slategray"="slategray","gray"="gray75","black"="black"))
#p <- p + facet_grid(. ~ type)
p <- p + theme_minimal() +
theme(
axis.text.x=element_text(size=6, hjust = 0,colour="slategray"),
axis.text.y=element_text(size = 5.5, angle = 0, hjust = 1,colour="slategray"),
strip.text.x = element_text(size = 8, angle = 0),
strip.text.y = element_text(size = 8, angle = 0),
axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
plot.title = element_text(size=7, face="bold",colour = "slategray"),
legend.position="none",
plot.title = element_text(size=7, face="bold",colour = "slategray"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "white")
)
p
barPlot <- function(
d1,
labels,
title="",
barcolor
)
{
if(nrow(d1)==0)
{
return(textGrob(""))
}
d <- cbind(type=barcolor,d1)
if(nrow(d)>0)
{
#d <- d[,value_numeric:=labels[value_numeric]]
d <- d[,value_numeric:=factor(value_numeric,levels=1:7)]
d <- d[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
d <- d[,         type:=factor(type)]
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + ggtitle(title)
p <- p + scale_fill_manual("",values=c("slategray"="slategray","gray"="gray75","black"="black"))
#p <- p + facet_grid(. ~ type)
p <- p + theme_minimal() +
theme(
axis.text.x=element_text(size=6, hjust = 0,colour="slategray"),
axis.text.y=element_text(size = 5.5, angle = 0, hjust = 1,colour="slategray"),
strip.text.x = element_text(size = 8, angle = 0),
strip.text.y = element_text(size = 8, angle = 0),
axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
plot.title = element_text(size=7, face="bold",colour = "slategray"),
legend.position="none",
plot.title = element_text(size=7, face="bold",colour = "slategray"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "white")
)
return(p)
} else {
return(textGrob(""))
}
}
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
# Run Tool
Run()
dev.off()
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
# Run Tool
Run()
variable="THROUGH_LANES"
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
data
data<-dat
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
minvalue1 <- var.1[,min(value_numeric)]
minvalue2 <- var.2[,min(value_numeric)]
maxvalue1 <- var.1[,max(value_numeric)]
maxvalue2 <- var.2[,max(value_numeric)]
minvalue <- min(minvalue1,minvalue2)
maxvalue <- max(maxvalue1,maxvalue2)
national1 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national2 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national3 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national4 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
variable="TOLL_CHARGED"
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
minvalue1 <- var.1[,min(value_numeric)]
minvalue2 <- var.2[,min(value_numeric)]
maxvalue1 <- var.1[,max(value_numeric)]
maxvalue2 <- var.2[,max(value_numeric)]
minvalue <- min(minvalue1,minvalue2)
maxvalue <- max(maxvalue1,maxvalue2)
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
dev.off()
dev.off()
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
Run()
dev.off()
Run()
dev.off()
variable="TOLL_TYPE"
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
minvalue1 <- var.1[,min(value_numeric)]
minvalue2 <- var.2[,min(value_numeric)]
maxvalue1 <- var.1[,max(value_numeric)]
maxvalue2 <- var.2[,max(value_numeric)]
minvalue <- min(minvalue1,minvalue2)
maxvalue <- max(maxvalue1,maxvalue2)
labels <- 1:7
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p11
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
variable
variable="TOLL_CHARGED"
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
minvalue1 <- var.1[,min(value_numeric)]
minvalue2 <- var.2[,min(value_numeric)]
maxvalue1 <- var.1[,max(value_numeric)]
maxvalue2 <- var.2[,max(value_numeric)]
minvalue <- min(minvalue1,minvalue2)
maxvalue <- max(maxvalue1,maxvalue2)
national1 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national2 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national3 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national4 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
labels <- 1:7
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
obj <- arrangeGrob(p11,p12,p13,p14,p21,p22,p23,p24,p31,p32,p33,p34,ncol=4,nrow=3)
obj
data
state
create_page_summary(data,state,year,year_compare,x1=7,x2=15,x3=16,title="test",icontext=9,page=10)
year_compare=2013
create_page_summary(data,state,year,year_compare,x1=7,x2=15,x3=16,title="test",icontext=9,page=10)
create_page_summary(data,state,year,year_compare,x1=7,x2=15,x3=16,title="test",icontext=9,page=10)
todo <- matrix((1:nrow(gVariables))[gVariables[,Grouping]=="I"],ncol=3,byrow=TRUE)
todo
create_page_summary(data,state,year,year_compare,x1=66,x2=67,x3=68,title="test",icontext=9,page=10)
variable="TOLL_CHARGED"
var.1    <- data[state_code==state&year_record==year          &data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
var.2    <- data[state_code==state&year_record==yearcomparison&data_item==variable&FACILITY_TYPE!=4&!is.na(value_numeric),list(route_id,begin_point,end_point,value_numeric,F_SYSTEM,Interstate,NHS)]
minvalue1 <- var.1[,min(value_numeric)]
minvalue2 <- var.2[,min(value_numeric)]
maxvalue1 <- var.1[,max(value_numeric)]
maxvalue2 <- var.2[,max(value_numeric)]
minvalue <- min(minvalue1,minvalue2)
maxvalue <- max(maxvalue1,maxvalue2)
national1 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national2 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national3 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
national4 <- var.2[sample(1:nrow(var.2),size=(nrow(var.2)*0.25)),]
nrow(var.2)
includeNational
national1
national1 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national2 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national3 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
national4 <- var.1[sample(1:nrow(var.1),size=(nrow(var.1)*0.25)),]
p11 <- barPlot(var.1[Interstate==1],labels,title=gF_SYSTEM_levels[1],barcolor="slategray")
p12 <- barPlot(var.1[NHS==1]       ,labels,title=gF_SYSTEM_levels[2],barcolor="slategray")
p13 <- barPlot(var.1[F_SYSTEM==1]  ,labels,title=gF_SYSTEM_levels[3],barcolor="slategray")
p14 <- barPlot(var.1[F_SYSTEM==2]  ,labels,title=gF_SYSTEM_levels[4],barcolor="slategray")
p21 <- barPlot(var.2[Interstate==1],labels,title="",barcolor="gray")
p22 <- barPlot(var.2[NHS==1]       ,labels,title="",barcolor="gray")
p23 <- barPlot(var.2[F_SYSTEM==1]  ,labels,title="",barcolor="gray")
p24 <- barPlot(var.2[F_SYSTEM==2]  ,labels,title="",barcolor="gray")
p31 <- barPlot(national1,labels,title="",barcolor="black")
p32 <- barPlot(national2,labels,title="",barcolor="black")
p33 <- barPlot(national3,labels,title="",barcolor="black")
p34 <- barPlot(national4,labels,title="",barcolor="black")
p31
p32
p33
p34
create_page_summary(data,state,year,year_compare,x1=66,x2=67,x3=68,title="test",icontext=9,page=10)
create_page_summary(data,state,year,year_compare,x1=66,title="test",icontext=9,page=10)
create_page_summary(data,state,year,year_compare,x1=67,title="test",icontext=9,page=10)
create_page_summary(data,state,year,year_compare,x1=68,title="test",icontext=9,page=10)
national1 <- NULL
p31 <- barPlot(national1,labels,title="",barcolor="black")
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
Run()
Run()
d
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + discrete_scale(breaks=c(500,1000))
p <- p + discrete_scale(,"",breaks=c(500,1000))
p <- p + discrete_scale("","",breaks=c(500,1000))
p <- p + discrete_scale("","","",breaks=c(500,1000))
p
p <- p + scale_fill_manual("",values=c("slategray"="slategray","gray"="gray75","black"="black"))
p
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + scale_fill_manual("",breaks=c(500,1000),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + ggtitle(title)
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + ggtitle(title)
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + ggtitle(title)
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + coord_flip()
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + scale_fill_manual("",breaks=c(250,500),values=c("slategray"="slategray","gray"="gray75","black"="black"))
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + scale_y_continuous("",breaks=c(250,500))
p
d
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p
round(p[,max(V1)]/1000,0)*1000
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
break.values
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + scale_y_continuous("",breaks=break.values))
p <- p + scale_y_continuous("",breaks=break.values)
p
p <- p + scale_y_continuous("",breaks=break.values,ylim=c(0,break.values[2]))
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + ylim(0,break.values[2])
p
p <- p + ylim(0,break.values[2]*2)
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + ylim(0,break.values[2]*2)
p
break.values[2]
break.values
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
break.values
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p
break.values <- c(round(p[,max(V1,na.rm=TRUE)]/1000,0)*500,round(p[,max(V1,na.rm=TRUE)]/1000,0)*1000)
break.values
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
break.values
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + ylim(0,break.values[2])
p <- p + scale_y_continuous("",breaks=break.values)
p
p <- p + ylim(0,break.values[2]*2)
p
p <- p + ylim(0,break.values[2]+100)
p
p <- d[,sum(end_point-begin_point),by=list(type,value_numeric)]
p <- merge(data.table(value_numeric=factor(7:1)),p,by="value_numeric",all.x=TRUE)
p[is.na(type),type:=barcolor]
p[is.na(V1),V1:=0]
break.values <- c(round(p[,max(V1)]/1000,0)*500,round(p[,max(V1)]/1000,0)*1000)
p <- p[,value_numeric:=factor(value_numeric,levels=rev(levels(value_numeric)))]
p <- ggplot(p,aes(x=value_numeric,y=V1,fill=type))
p <- p + geom_bar(aes(width=0.25),stat="identity",position=position_dodge(0.8))
p <- p + scale_y_continuous("",breaks=break.values,limits(0,break.values[2]+100))
p <- p + coord_flip()
p <- p + scale_y_continuous("",breaks=break.values,limits=c(0,break.values[2]+100))
p
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
Run()
dev.off()
invisible(sapply(X = list.files(path = "code", pattern = "*.R", full.names = TRUE)[-1], FUN = source))
# Run Tool
Run()
"Year"=="year"
"Year"=="Year"
Run()
